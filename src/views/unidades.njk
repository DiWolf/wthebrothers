{% extends "templates/portal.njk" %}
{% block content %}
    <!-- Inner Banner Area Strat -->
    <section id="inner_area_banner">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="inner_banner_text">
                        <h2>{{ __('gallery.breadcrumb.title') }}</h2>
                        <ul>
                            <li>
                                <a href="/">{{ __('gallery.breadcrumb.home') }}</a>
                            </li>
                            <li>></li>
                            <li class="active">{{ __('gallery.breadcrumb.title') }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Gallery Area Strat -->
    <!-- GALERÍA -->
    <section id="gallery_area" class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="section_heading_center">
                        <h2>{{ __('gallery.heading') }}</h2>
                        <p class="mb-2">{{ __('gallery.subheading') }}</p>
                        <p>{{ __('gallery.description') }}</p>
                        <br></div>
                    </div>
                </div>
                <div
                    class="gallery-grid">
                    <!-- Ítem -->
                    {% set gallery = __('gallery') %}
                    {% for item in gallery.items %}
                        <a class="gallery-item" href="{{ item.image }}" data-bs-toggle="modal" data-bs-target="#lightboxModal" data-caption="{{ item.title }} – {{ item.caption }}" data-full="{{ item.full }}">
                            <img src="{{ item.image }}" alt="{{ item.alt }}" class="gallery-img" loading="lazy" decoding="async" width="800" height="600">
                                <span class="gallery-overlay">
                                    <strong>{{ item.title }}</strong>
                                    <small>{{ item.caption }}</small>
                                </span>
                            </a>
                        {% endfor %}
                    </div>
                </div>
            </section>
            <!-- MODAL Lightbox (Bootstrap 5) -->
            <div class="modal fade" id="lightboxModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered modal-xl">
                    <div class="modal-content bg-black">
                        <button type="button" class="btn-close btn-close-white ms-auto me-2 mt-2" data-bs-dismiss="modal" aria-label="Close"></button>
                        <div class="modal-body p-0">
                            <img id="lightboxImg" src="" alt="" class="w-100 d-block"></div>
                            <div class="px-3 py-2 text-white-50" id="lightboxCaption"></div>
                        </div>
                    </div>
                </div>
                <!-- Gallery Area End -->
                <!-- Inner Banner Area End -->
                <script>
                    // Lightbox: coloca la imagen y el caption en el modal
                    document.querySelectorAll('.gallery-item').forEach(a => {
                        a.addEventListener('click', (e) => {
                            const full = a.dataset.full || a.href;
                            const cap = a.dataset.caption || '';
                            const img = document.getElementById('lightboxImg');
                            const text = document.getElementById('lightboxCaption');
                            img.src = full;
                            img.alt = cap;
                            text.textContent = cap;
                        });
                    });
                </script>
            {% endblock %}